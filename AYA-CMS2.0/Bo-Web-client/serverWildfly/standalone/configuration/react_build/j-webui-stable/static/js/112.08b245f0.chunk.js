(this["webpackJsonpstable-app"]=this["webpackJsonpstable-app"]||[]).push([[112],{178:function(t,e,a){"use strict";a.r(e);var i=a(0),s=a.n(i),l=a(1),o=a(5),n=a(4),g=a(9);const _=Object(n.b)("jwebui_MyDevice");class d extends i.Component{constructor(t){super(t),this.getInfoA=()=>this.stateHidden.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.stateHidden.visibility=t,this.setState({reload:!0})},this.changeKeyLanguage=t=>{let e={note:l.g.getLang("note"),title:l.g.getLang("myDevice_title"),des:l.g.getLang("myDevice_des"),stt:l.g.getLang("stt"),logout:l.g.getLang("device_action"),where_logged_in:l.g.getLang("device_where_logged_in"),logout_all_app:l.g.getLang("device_logout_all_app"),logout_all_ssn:l.g.getLang("device_logout_all_ssn"),see_more:l.g.getLang("see_more")};if(void 0!==t)return e;let a=this.stateHidden.infoA;a.title=l.g.getLang("myDevice_title"),a.des=l.g.getLang("myDevice_des"),a.lang_form.vi=l.g.getLang("myDevice_title"),a.lang_form.en=l.g.getLang("myDevice_title"),this.stateHidden.infoA=a,this.stateHidden.languages=e,this.changeLanguageTemplate(e)},this.abs_click_logout_all_app=t=>{Object(o.b)([{txcode:"#sys:bo-delete-sessionAll",input:{token_webui:Object(l.w)()}}],{}).then(t=>{},t=>{})},this.abs_Click_logout_session=(t,e,a)=>{Object(o.b)([{txcode:"#sys:bo-delete-session",input:{token_webui:e.token_webui}}],{}).then(t=>{var e=this.state.stateData,a=l.g.foGetData("device",t);let i=this.convertDataTemplate(a);e.data_device=i,this.setState({stateData:e})},t=>{})},this.abs_click_logout_app=()=>{let t=this.stateHidden.user_info;Object(o.b)([{txcode:"#sys:bo-delete-sessionUserId",input:{user_id:t.user_id,logout_app:t.app_name}}],{}).then(t=>{var e=this.state.stateData,a=l.g.foGetData("device",t);let i=this.convertDataTemplate(a);e.data_device=i,this.setState({stateData:e})},t=>{})},this.convertDataTemplate=t=>{let e={tab:[]};for(const a in t){let i=Object.values(t[a]);e.tab.push({id:a,title:a+`(${i.length})`}),e[a]={abs_click_logout_app:this.abs_click_logout_app,data:i.map(t=>{let e=t.info.my_device;return{title_main:""+e.browser,title_OFD:"Token: "+t.token_webui,description:`${e.browser} | ${e.my_ip} | ${Object(g.b)(t.logined,"DD/MM/YYYY HH:mm:ss")}`,widget:this.getDeviceStatus(t.status),dataItem:t,abs_Click:this.abs_Click_logout_session}})},i[0]&&(this.stateHidden.user_info=i[0])}return e},this.key_form="myDevice";let e=this.changeKeyLanguage("start");this.stateHidden={languages:e,infoA:{lang_form:{vi:l.g.getLang("myDevice_title"),en:l.g.getLang("myDevice_title")},title:l.g.getLang("myDevice_title"),des:"Ki\u1ec3m so\xe1t c\xe1c thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp!",openOne:"true",ofModal:!1},visibility:!1,user_info:{}},this.state={stateData:{form:{dataFull:{config:{default:{title:e.title,title_sub:e.des}},cmd:{visibility:""}}},dataFull:{where_logged_in:e.where_logged_in,log_out_of_all_application:e.logout_all_app,log_out_all_sessions:e.logout_all_ssn,log_out:e.logout,see_more:e.see_more},table:{Header:{data:[{title:"No.",id:"1",config:{width:"20px"}},{title:"Parameter title",id:"2"},{title:"Value",id:"3"},{title:"Note",id:"4"},{title:"Data type",id:"5"},{title:"",id:"6"}]},config:{mode:{noHeader:!0}}},data_device:this.convertDataTemplate(this.props.data),logout_all_app:{data_item:this.stateHidden.user_info,abs_click:this.abs_click_logout_all_app}}}}componentDidMount(){l.g.addAppAuto(this.key_form,this,this.stateHidden.infoA.ofModal),l.g.form_addMapping(this.key_form,this.props.mapping_key)}changeLanguageTemplate(t){let{stateData:e}=this.state;e.form.dataFull.config.default.title=t.title,e.form.dataFull.config.default.title_sub=t.des,e.dataFull.where_logged_in=t.where_logged_in,e.dataFull.log_out_of_all_application=t.logout_all_app,e.dataFull.log_out_all_sessions=t.logout_all_ssn,e.dataFull.see_more=t.see_more,e.dataFull.log_out=t.logout,this.setState({stateData:e})}getDeviceStatus(t){let e={};switch(t){case"active":e={type:"success",title:"active"};break;case"lock":e={type:"default",title:"locked"}}return e}render(){return"none"===this.stateHidden.visibility?null:s.a.createElement(_,{stateData:this.state.stateData})}}e.default=d}}]);