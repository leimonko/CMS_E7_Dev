(this["webpackJsonpstable-app"]=this["webpackJsonpstable-app"]||[]).push([[13,99],{135:function(t,e,i){"use strict";i.r(e);var s=i(0),a=i.n(s),o=i(5),l=i(1),n=i(9),_=i(4),m=i(136);class r extends s.Component{constructor(t){super(t),this.createListTemplate=()=>{let t=[],e=this.allListFormTemplate.reduce((t,e)=>(void 0!==e.template&&void 0!==e.template.group_code&&(t[e.template.group_code]=[...t[e.template.group_code]||[],e]),t),{});for(const[i,s]of Object.entries(e)){let e=[];for(let t=0;t<s.length;t++)e.push({img:s[t].template.img,title:s[t].info.title,dataItem:{template:s[t].template,key_form:s[t].info.form_code,title:s[t].info.title}});t.push({title:i,data:e})}return t},this.componentDidUpdate=(t,e)=>{if(this.props.allListForms!==t.allListForms){this.allListForms=this.props.data.allListForms.map(t=>t[this.DESIGNFORM_CODE_DATABASE]),this.allDesignToolItems=this.props.data.allDesignToolItems.map(t=>t[this.DESIGNFORM_CODE_TOOL_ITEMS]),this.allDesignToolGroups=this.props.data.allDesignToolGroups.map(t=>t[this.DESIGNFORM_CODE_TOOL_GROUPS]),this.allListFormTemplate=this.props.data.allListFormTemplate.map(t=>t[this.DESIGNFORM_CODE_FORM_TEMPLATE]),this.allListApp=this.props.data.allListApp,this.allListForms.sort((function(t,e){return void 0!==t.info.last_update?-1:void 0===e.info.last_update?1:0}));let t=[],e=this.createListTemplate();for(let s=0;s<this.allListFormTemplate.length;s++){const e=this.allListFormTemplate[s];t.push({title:e.info.title,img:e.template.img,dataItem:{template:e.template,key_form:e.info.form_code,title:e.info.title}})}t.sort((function(t,e){return t.dataItem.template.isBlank?-1:e.dataItem.template.isBlank?1:0}));let i=this.state.design_form_begin;i.list_forms=this.convert_listForm_dataTemplate(this.allListForms),i.list_templates.data=e,i.list_forms_begin.data=t,this.setState({design_form_begin:i},()=>{this.props.func_DF_Begin_setNoLoading()})}},this.func_ListForm_Close=t=>{let{design_form_begin:e,design_form_design:i}=this.state,s={},a=-1;console.log("form",t),t.template&&t.template.isTemplate?(s=t,this.allListForms.splice(0,0,s)):(s=this.allListForms.find((e,i)=>(a=i,e.info.form_code===t.info.form_code&&e.info.app===t.info.app)),s=t,delete s.template,this.allListForms[a]=s,console.log(s,a)),this.allListForms.sort((function(t,e){return void 0!==t.info.last_update?-1:void 0===e.info.last_update?1:0})),e.list_forms=this.convert_listForm_dataTemplate(this.allListForms),e.search.value="",i.cmd.visibility=!1,this.setState({design_form_begin:e,design_form_design:i},()=>{})},this.func_Template_Open=t=>{console.log("func_Template_Open=>",t,this.allListForms);let e=this.state.design_form_design,i=this.allListFormTemplate.find((e,i)=>e.info.form_code===t.key_form);e.form_detail=i,e.cmd.visibility=!0,this.setState({design_form_design:e},()=>{})},this.func_ListForm_Open=t=>{let e=this.state.design_form_design,i=this.allListForms.find((e,i)=>e.info.form_code===t.key_form&&e.info.app===t.app);e.form_detail=i,e.cmd.visibility=!0,this.setState({design_form_design:e},()=>{this.showToast("Open Form",!0)})},this.list_forms_render_data=(t,e,i)=>{let s=[];for(let a=e;a<i;a++){let e=t[a];s.push({app:e.info.app,title:e.info.title,link:e.info.link?e.info.link:`/${e.info.app}/form`,code:e.info.form_code,last_update:e.info.last_update?e.info.last_update:"",icon:e.info.icon?e.info.icon:"account_balance_wallet",dataItem:{key_form:e.info.form_code,title:e.info.title,app:e.info.app},img:e.info.img?e.info.img:"https://i.imgur.com/KgdR2xr.png",list_buttons:this.listForm_createButtonList({key_form:e.info.form_code,title:e.info.title,app:e.info.app}),abs_OpenForm:this.func_ListForm_Open})}return s.sort((function(t,e){return t.last_update>e.last_update?-1:t.last_update<e.last_update?1:0})),s},this.listForm_createButtonList=t=>[{title:l.g.getLang("designForm_btn_open"),icon_item:"folder_open",dataItem:t,abs_Click:this.func_ListForm_Open},{title:l.g.getLang("designForm_btn_duplicate"),icon_item:"copy",dataItem:t,abs_Click:this.func_ListForm_Duplicate},{title:l.g.getLang("designForm_btn_rename"),icon_item:"title",dataItem:t,abs_Click:this.func_ListForm_Rename},{title:l.g.getLang("designForm_btn_delete"),icon_item:"delete",dataItem:t,abs_Click:this.func_ListForm_Delete}],this.func_ListForm_Delete=t=>{let e=this.state.modal_delete_state;e.modal.visibility=!0,this.modal_delete_dataItem=t,this.setState({modal_delete_state:e})},this.func_ListForm_Duplicate=t=>{if(this.allListForms){let e=-1,i=l.g.cloneJson(this.allListForms.find((i,s)=>(e=s,i.info.form_code===t.key_form&&i.info.app===t.app)));i&&(i.info.form_code=l.g.autoID(),i.info.title="Copy - "+t.title,this.func_ListForm_Rename({app:i.info.app,key_form:i.info.form_code,title:i.info.title,isCopy:!0,newDuplicateForm:i,index_item:e}))}},this.showToast=(t,e)=>{var i={};switch(e){case!0:i={class_:"success",icon:"fa fa-check",title:t+" successfully",time:(new Date).getTime()+"",description:t+" Successfully",data:{},action:{}};break;case!1:default:i={class_:"error",icon:"fa fa-check",title:t,time:(new Date).getTime()+"",description:t,data:{},action:{}}}l.g.pushNotify("notifyToast",i,{}),l.g.callAllScreenListen()},this.func_ListForm_Rename=t=>{let e=this.state.modal_rename_state;this.modal_rename_dataItem.title=t.title,this.modal_rename_dataItem.key_form=t.key_form,this.modal_rename_dataItem.app=t.app,e.form.input_confirm.cmd.error.message="",e.modal.visibility=!0,e.form.input_confirm.value=t.title,t.isCopy?(this.modal_rename_dataItem.isCopy=!0,this.modal_rename_dataItem.newDuplicateForm=t.newDuplicateForm,this.modal_rename_dataItem.index_item=t.index_item):this.modal_rename_dataItem.isCopy=!1,this.setState({modal_rename_state:e})},this.func_Template_ShowMore=()=>{console.log("func_Template_ShowMore")},this.func_ClickChooseTemplate=()=>{console.log("func_ClickChooseTemplate")},this.func_DF_begin_search=t=>{let e=this.state.design_form_begin;e.search.value=t.target.value,this.df_begin_search_settimeout.isTyping=!0,this.setState({design_form_begin:e},()=>{setTimeout(()=>{let{design_form_begin:t}=this.state,i=this.allListForms.filter(t=>t.info.title.toLowerCase().includes(e.search.value.toLowerCase().trim())||t.info.form_code.toLowerCase().includes(e.search.value.toLowerCase().trim()));i&&(t.list_forms=this.convert_listForm_dataTemplate(i),this.setState({design_form_begin:t}))},300)})},this.func_df_CloseRenameModal=()=>{console.log("func_df_CloseRenameModal=>");let t=this.state.modal_rename_state;t.modal.visibility=!1,this.setState({modal_rename_state:t})},this.func_df_CloseDeleteModal=()=>{console.log("func_df_CloseDeleteModal=>");let t=this.state.modal_delete_state;t.modal.visibility=!1,this.setState({modal_delete_state:t})},this.func_df_confirmDelete=()=>{let{design_form_begin:t}=this.state;console.log("func_abs_confirmDelete",this.modal_delete_dataItem),Object(o.b)([{txcode:"bo-designForm-delete",input:{dataItem:{key_form:this.modal_delete_dataItem.key_form,app_code:this.modal_delete_dataItem.app}}}],{}).then(e=>{let i=l.g.foGetData("result",e);if("NOT_ERROR"===i.error_code){const e=this.allListForms.findIndex(t=>t.info.form_code===this.modal_delete_dataItem.key_form&&t.info.app===this.modal_delete_dataItem.app);-1!==e&&this.allListForms.splice(e,1),t.search.value="",t.list_forms=this.convert_listForm_dataTemplate(this.allListForms),this.setState({design_form_begin:t},()=>{this.func_df_CloseDeleteModal(),this.showToast(l.g.getLang("designForm_btn_delete"),!0)})}else console.log("result_item.error_code====>",i.error_code),this.func_df_CloseDeleteModal(),this.showToast(l.g.getLang("designForm_btn_delete"),!1)})},this.func_designForm_Rename_Change=t=>{console.log("func_designForm_Rename_Change",t.target.value);let e=this.state.modal_rename_state;e.form.input_confirm.value=t.target.value,this.modal_rename_dataItem.title=t.target.value,this.modal_rename_dataItem.isCopy&&(this.modal_rename_dataItem.newDuplicateForm.info.title=this.modal_rename_dataItem.title),this.setState({modal_rename_state:e})},this.bo_save_form=async t=>{console.log("formformform",t);let e={},i={};return i[this.DESIGNFORM_CODE_DATABASE]=l.g.cloneJson(t),void 0!==i[this.DESIGNFORM_CODE_DATABASE].template&&i[this.DESIGNFORM_CODE_DATABASE].template.isTemplate,delete i[this.DESIGNFORM_CODE_DATABASE].template,e=await Object(o.b)([{txcode:"bo-designForm-save",input:{dataItem:{key_form:i[this.DESIGNFORM_CODE_DATABASE].info.form_code,newForm_Data:i,app_code:i[this.DESIGNFORM_CODE_DATABASE].info.app}}}],{}),e},this.func_designForm_Rename_Save=async()=>{const{modal_rename_state:t}=this.state,e=t.form.input_confirm.value;if(this.allListForms.find(t=>t.info.title===e&&t.info.form_code!==this.modal_rename_dataItem.key_form&&t.info.app===this.modal_rename_dataItem.app))t.form.input_confirm.cmd.error.message=" This name is taken. Try another. ",this.setState({modal_rename_state:t});else if(this.modal_rename_dataItem.isCopy){let t=this.modal_rename_dataItem.newDuplicateForm;t.last_update=this.formatDate();const e=await this.bo_save_form(t);let i=l.g.foGetData("result",e);if("NOT_ERROR"===i.error_code){let e=this.state.design_form_begin;this.allListForms.splice(this.modal_rename_dataItem.index_item+1,0,t),e.search.value="",e.list_forms=this.convert_listForm_dataTemplate(this.allListForms),this.setState({design_form_begin:e},()=>{this.func_df_CloseRenameModal(),this.showToast(l.g.getLang("designForm_btn_duplicate"),!0)})}else console.log("(result_item.error_code",i.error_code),this.func_df_CloseRenameModal(),this.showToast(l.g.getLang("designForm_btn_duplicate"),!1)}else{const t=this.allListForms.find(t=>t.info.form_code===this.modal_rename_dataItem.key_form&&t.info.app===this.modal_rename_dataItem.app);if(t){t.info.title=e,t.info.last_update=this.formatDate();const i=await this.bo_save_form(t);let s=l.g.foGetData("result",i);if("NOT_ERROR"===s.error_code){let i=this.state.design_form_begin;const s=this.allListForms.findIndex(t=>t.info.form_code===this.modal_rename_dataItem.key_form&&t.info.app===this.modal_rename_dataItem.app);-1!==s&&(this.allListForms[s].info.title=e,this.allListForms[s].info.last_update=t.info.last_update),i.search.value="",i.list_forms=this.convert_listForm_dataTemplate(this.allListForms),this.setState({design_form_begin:i},()=>{this.func_df_CloseRenameModal(),this.showToast(l.g.getLang("designForm_btn_rename"),!0)})}else console.log("(result_item.error_code",s.error_code),this.func_df_CloseRenameModal(),this.showToast(l.g.getLang("designForm_btn_rename"),!1)}}},this.convert_listForm_dataTemplate=t=>{let e=[];return e=t.length>=this.RENDER_ITEMS_NUMBER?this.list_forms_render_data(t,0,this.RENDER_ITEMS_NUMBER):this.list_forms_render_data(t,0,t.length),e},this.getAllFormByApp=t=>this.allListForms.filter(e=>e.info.app===t),this.DESIGNFORM_CODE_DATABASE="designForm",this.DESIGNFORM_CODE_TOOL_GROUPS="designToolGroup",this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.DESIGNFORM_CODE_FORM_TEMPLATE="designFormTemplate",this.RENDER_ITEMS_NUMBER=50,this.allListForms=[],this.allDesignToolItems=[],this.allDesignToolGroups=[],this.allListFormTemplate=[],this.allListApp=[],this.form_index=-1,this.DF_Begin_Render=Object(_.b)("screen_begin"),this.Modal_Delete_Render=Object(_.b)("designFormModal_form_delete"),this.Modal_Rename_Render=Object(_.b)("designFormModal_form_rename"),this.modal_rename_dataItem={isCopy:!1,newDuplicateForm:{}},this.modal_delete_dataItem={},this.modal_delete_component_dataItem={},this.isSearching=!1,this.df_begin_search_settimeout={isTyping:!1,func_setTimeOut:null},this.state={lang_system:l.g.getConfigUserDefault("list_lang_config"),design_form_design:{cmd:{visibility:!1},form_detail:{},form_index:-1},design_form_begin:{cmd:{visibility:!0},lang_menu:{data:[{title:"English",selected:!0,img:"https://i.imgur.com/KgdR2xr.png",dataItem:{aaa:"aaa"}},{title:"Ti\u1ebfng Vi\u1ec7t",img:"https://i.imgur.com/OKjHV0p.png",dataItem:{aaa:"aaa"}}],abs_Click:this.test},lang:{title:l.g.getLang("designForm_title"),powered_by:l.g.getLang("designForm_powered_by"),jwebui:"JwebUI",list_form:l.g.getLang("designForm_list_form"),more_template:l.g.getLang("designForm_more_template"),alt_img:l.g.getLang("designForm_alt_img"),last_update:l.g.getLang("designForm_last_update"),back_to_home:l.g.getLang("designForm_BacktoHome"),title_icon_copy:"copy",title_icon_delete:"delete",title_icon_duplicate:"duplicate",title_icon_rename:"rename"},list_forms_begin:{abs_Click:this.func_Template_Open,data:[]},list_templates:{abs_Click:this.func_Template_Open,abs_TemplateShowMore:this.func_Template_ShowMore,data:[]},search:{placeholder:"Search",value:"",abs_Change:this.func_DF_begin_search},mode_list:{table_column:[l.g.getLang("designForm_name"),l.g.getLang("designForm_code"),l.g.getLang("designForm_last_update"),""]},list_forms:[]},modal_rename_state:{form:{title:l.g.getLang("designForm_rename_TitleForm"),list_buttons:[{dataFull:{config:{default:{title:l.g.getLang("designForm_btn_cancel"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_df_CloseRenameModal}},{dataFull:{config:{default:{title:l.g.getLang("designForm_btn_save"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_designForm_Rename_Save}}],input_confirm:{cmd:{error:{message:"",type:"error"}},value:"",placeholder:l.g.getLang("designForm_rename_InputConfirm"),abs_Change:this.func_designForm_Rename_Change}},modal:{title:l.g.getLang("designForm_rename_TitleModal"),abs_Close:this.func_df_CloseRenameModal,visibility:!1}},modal_delete_state:{form:{title:l.g.getLang("designForm_delete_TitleForm"),list_buttons:[{dataFull:{config:{default:{title:l.g.getLang("designForm_btn_cancel"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_df_CloseDeleteModal}},{dataFull:{config:{default:{title:l.g.getLang("designForm_btn_delete"),type:"danger",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_df_confirmDelete}}]},modal:{title:l.g.getLang("designForm_delete_TitleModal"),abs_Close:this.func_df_CloseDeleteModal,visibility:!1}}}}formatDate(t){return t||(t=(new Date).getTime()),Object(n.b)(t,"DD/MM/YYYY hh:mm:ss A")}render(){const t=this.DF_Begin_Render,e=this.Modal_Rename_Render,i=this.Modal_Delete_Render;return a.a.createElement("div",{className:"d-flex col-12"},a.a.createElement("div",{className:"main",style:{width:"100%"}},a.a.createElement(t,{stateData:this.state.design_form_begin}),a.a.createElement(e,{stateData:this.state.modal_rename_state}),a.a.createElement(i,{stateData:this.state.modal_delete_state}),this.state.design_form_design.cmd.visibility?a.a.createElement(m.default,{bo_save_form:this.bo_save_form,getAllFormByApp:this.getAllFormByApp,showToast:this.showToast,func_ListForm_Close:this.func_ListForm_Close,data:{allDesignToolGroups:this.allDesignToolGroups,allDesignToolItems:this.allDesignToolItems,allListApp:this.allListApp,allListForms:this.allListForms,form_detail:this.state.design_form_design.form_detail}}):null))}}e.default=r},138:function(t,e,i){"use strict";i.r(e);var s=i(0),a=i.n(s),o=i(135),l=i(5),n=i(1),_=i(4),m=i(163);class r extends s.Component{constructor(t){super(t),this.callScreen=()=>{var t=n.g.getListNotifications(this.type_screen);void 0!==t&&t.length>0&&(n.g.clearNotifyType(this.type_screen),this.setState({dataNoti:t}))},this.componentDidMount=()=>{n.g.addScreen(this),Object(l.b)([{txcode:"bo-designForm-getAll"}],{}).then(t=>{let e=n.g.foGetData("list_form",t);this.allListForms=e;let i=n.g.foGetData("list_design_tool_group",t);this.allDesignToolGroups=i;let s=n.g.foGetData("list_design_tool_item",t);this.allDesignToolItems=s;let a=n.g.foGetData("list_form_template",t);this.allListFormTemplate=a;let o=n.g.foGetData("list_app",t);this.allListApp=o,console.log(" this.allListApp",this.allListApp),this.setState({isRender:!0})})},this.func_DF_Begin_setNoLoading=()=>{this.setState({isLoading:!1})},this.DESIGNFORM_CODE_DATABASE="designForm",this.DESIGNFORM_CODE_TOOL_GROUPS="designToolGroup",this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.DESIGNFORM_CODE_FORM_TEMPLATE="designFormTemplate",this.DF_Loading=Object(_.a)("uScreenLoading"),this.RENDER_ITEMS_NUMBER=20,this.allListForms=[],this.allDesignToolItems=[],this.allDesignToolGroups=[],this.allListFormTemplate=[],this.allListApp=[],this.state={isRender:!1,isLoading:!0,dataNoti:[]},this.type_screen="notifyToast"}render(){const t=this.DF_Loading;return a.a.createElement("div",{className:"d-flex col-12"},a.a.createElement(m.a,{data:this.state.dataNoti}),a.a.createElement("div",{className:"main",style:{width:"100%"}},this.state.isLoading?a.a.createElement(t,null):null,a.a.createElement(o.default,{allListForms:this.allListForms,func_DF_Begin_setNoLoading:this.func_DF_Begin_setNoLoading,data:{allDesignToolGroups:this.allDesignToolGroups,allDesignToolItems:this.allDesignToolItems,allListForms:this.allListForms,allListFormTemplate:this.allListFormTemplate,allListApp:this.allListApp}})))}}e.default=r},163:function(t,e,i){"use strict";var s=i(0),a=i.n(s),o=i(4);class l extends s.Component{constructor(){super(...arguments),this.getUNotificationConfig=()=>{let t={config:{mode:"toast"},data:[]};return this.props.data.forEach((e,i)=>{t.data.push({id:e.time,title:e.description,color:e.class_,message:e.description,config:{time_out:1e4}})}),t}}render(){const t=Object(o.a)("uNotification");return a.a.createElement(t,{dataFull:this.getUNotificationConfig()})}}e.a=l}}]);