(this["webpackJsonpstable-app"]=this["webpackJsonpstable-app"]||[]).push([[3,41,96,97],{132:function(e,t,a){"use strict";a.r(t);var i=a(7),o=a(0),l=a.n(o),s=a(4),n=a(55);class _ extends o.Component{constructor(e){super(e),this.componentDidMount=()=>{let e=this.state.modal_confirm;e.modal.visibility=this.props.configComponent.visibility,this.setState({modal_confirm:e})},this.func_cancel_modal_config_component=()=>{this.props.func_cancel_modal_config_component()},this.getData=()=>{let e={},t=this.refs.CCPDefaultDefault.getData(),a=this.refs.CCPDefaultConfig.getData(),i=this.refs.CCPDefaultEssence.getData(),o=this.refs.CCPDefaultLang.getData(),l=this.refs.CCPDefaultRole.getData(),s=this.refs.CCPDefaultValidate.getData();void 0!==t&&(e.default=t),void 0!==a&&(e.config=a),void 0!==i&&(e.property=i),void 0!==o&&(e.lang=o),void 0!==l&&(e.role=l),void 0!==s&&(e.validate=s),console.log("data_return",e),this.props.func_save_cp_config(e)},this.UFormTab=Object(s.a)("uFormTab"),this.UTextArea=Object(s.a)("uTextArea"),this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.ModalConfirm=Object(s.b)("designFormModal_ConfigComponent"),this.CCPDefaultConfig=n.default[this.props.configComponent.configInputType+"Config"],this.CCPDefaultDefault=n.default.CCPDefaultDefault,this.CCPDefaultEssence=n.default[this.props.configComponent.configInputType+"Essence"],this.CCPDefaultLang=n.default[this.props.configComponent.configInputType+"Lang"],this.CCPDefaultRole=n.default[this.props.configComponent.configInputType+"Role"],this.CCPDefaultValidate=n.default[this.props.configComponent.configInputType+"Validate"],console.log("Th\xed.props.itemsd,sdsa",this.props),this.state={modal_confirm:{modal:{title:"Config Component "+this.props.configComponent.configInputType,abs_Close:this.func_cancel_modal_config_component,visibility:!1},form:{list_buttons:[{dataFull:{config:{default:{title:"Cancel",type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_cancel_modal_config_component}},{dataFull:{config:{default:{title:"Save",type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.getData}}]}},form:{tab_form:{data:[{title:"Config Default",id:"configComponent_Default"},{title:"JSON",id:"configComponent_JSON"}],abs_select:this.abs_selectTabForm},configComponent_Default:{tab_form:{data:[{title:"Default",id:"CCP_Default_Default"},{title:"Config",id:"CCP_Default_Config"},{title:"Role",id:"CCP_Default_Role"},{title:"Essence",id:"CCP_Default_Essence"},{title:"Validate",id:"CCP_Default_Validate"},{title:"Languages",id:"CCP_Default_Lang"}],abs_select:this.abs_selectTabForm}},configComponent_JSON:{CCP_JSON_config:{list_text_area:[{dataFull:{config:{default:{helper:"Default",title:"Default",class:"col-md-12",rows:10,code_form_component:""},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(this.props.configComponent.configItem.default,null,4),abs_Change:this.testTextArea}},{dataFull:{config:{default:{helper:"Config",title:"Config",class:"col-md-12",rows:10,code_form_component:""},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(this.props.configComponent.configItem.config,null,4),abs_Change:this.testTextArea}},{dataFull:{config:{default:{helper:"Role",title:"Role",class:"col-md-12",rows:10,code_form_component:""},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(this.props.configComponent.configItem.role,null,4),abs_Change:this.testTextArea}},{dataFull:{config:{default:{helper:"Property",title:"Property",class:"col-md-12",rows:10,code_form_component:""},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(this.props.configComponent.configItem.property,null,4),abs_Change:this.testTextArea}}]}},CCP_Default_Config:{CCP_Default_Config_config:this.CCPDefaultConfig},CCP_Default_Default:this.CCPDefaultDefault,CCP_Default_Role:this.CCPDefaultRole,CCP_Default_Essence:this.CCPDefaultEssence,CCP_Default_Validate:this.CCPDefaultValidate,CCP_Default_Lang:this.CCPDefaultLang},data:this.props.configComponent.configItem}}renderTableDevice(e){const t=this.CCPDefaultDefault,a=this.CCPDefaultConfig,o=this.CCPDefaultEssence,s=this.CCPDefaultLang,n=this.CCPDefaultRole,_=this.CCPDefaultValidate,d=this.UTextArea,c=this.UFormTab;return l.a.createElement(l.a.Fragment,null,"configComponent_Default"===e&&l.a.createElement("div",{className:"designForm-desktop-uModal-config_component-tab"},l.a.createElement(c,{dataFull:this.getDataTabFormChild(e)})),"configComponent_JSON"===e&&l.a.createElement("div",{className:"designForm-desktop-uModal-config_component-tab_JSON row"},this.state.form[e].CCP_JSON_config.list_text_area.map((e,t)=>l.a.createElement(d,Object.assign({key:t},e)))),"CCP_Default_Default"===e&&l.a.createElement(t,Object.assign({ref:"CCPDefaultDefault",stateData:Object(i.a)({},this.state.form[e])},this.props)),"CCP_Default_Config"===e&&l.a.createElement(a,Object.assign({ref:"CCPDefaultConfig"},this.props,{stateData:Object(i.a)({},this.state.form[e][e+"_config"])})),"CCP_Default_Role"===e&&l.a.createElement(n,Object.assign({ref:"CCPDefaultRole"},this.props,{stateData:Object(i.a)({},this.state.form[e])})),"CCP_Default_Essence"===e&&l.a.createElement(o,Object.assign({ref:"CCPDefaultEssence"},this.props,{stateData:Object(i.a)({},this.state.form[e])})),"CCP_Default_Validate"===e&&l.a.createElement(_,Object.assign({ref:"CCPDefaultValidate"},this.props,{stateData:Object(i.a)({},this.state.form[e])})),"CCP_Default_Lang"===e&&l.a.createElement(s,Object.assign({ref:"CCPDefaultLang"},this.props,{stateData:Object(i.a)({},this.state.form[e])})))}getDataTabFormChild(e){let t=[];for(const a of this.state.form[e].tab_form.data)t.push({tabInfo:{title:a.title,id:a.id},sysStyle:{show:a.isShow?"show":""},DOM_elm:this.renderTableDevice(a.id)});return t={data:t},t}render(){const e=this.ModalConfirm,t=this.UFormTab;let a=[];for(const i of this.state.form.tab_form.data)a.push({tabInfo:{title:i.title,id:i.id},sysStyle:{show:i.isShow?"show":""},DOM_elm:this.renderTableDevice(i.id)});return a={data:a},l.a.createElement(e,{stateData:this.state.modal_confirm},l.a.createElement(t,{dataFull:Object(i.a)(Object(i.a)({},a),{},{abs_select:this.abs_select})}))}}t.default=_},133:function(e,t,a){"use strict";a.r(t);var i=a(0),o=a.n(i),l=a(1),s=a(4);class n extends i.Component{constructor(e){super(e),this.getData=()=>{let e=this.state.modal_config_layout.form,t={},a={};e.lang_layout.list_lang_inputs.forEach(e=>{const a=e.dataFull.config.default.code_form_component,i=e.dataFull.value;t[a]=i}),e.guide_layout.list_guide_inputs.forEach(e=>{const t=e.dataFull.config.default.code_form_component,i=e.dataFull.value;a[t]=i}),this.props.func_save_modal_config_layout({name:e.config_layout.name_layout.dataFull.value,class:e.config_layout.class_layout.dataFull.value,des:e.config_layout.guide_layout.dataFull.value,lang:t,lang_des:a,inputtype:this.state.data.inputtype,list_view:this.state.data.list_view,codeHidden:this.state.data.codeHidden})},this.readConfigLayout=e=>{var t={};return void 0===e&&(e={}),null!=e.name?t.name=e.name:t.name="",null!=e.des?t.des=e.des:t.des="",null!=e.class?t.class=e.class:t.class="col-md-12 col-lg-12",null!=e.lang?t.lang=e.lang:t.lang={},null!=e.lang_des?t.lang_des=e.lang_des:t.lang_des={},null!=e.codeHidden?t.codeHidden=e.codeHidden:t.codeHidden=l.g.autoID(),null!=e.inputtype?t.inputtype=e.inputtype:t.inputtype="",null!=e.list_view?t.list_view=e.list_view:t.list_view=[],t},this.nameLayout_configLayout=e=>this.lang_system.map(t=>({dataFull:{config:{default:{title:t.view,class:"col-md-6 ",required:!1,placeholder:t.view,helper:t.view,code_form_component:t.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},value:e.lang[t.key]?e.lang[t.key]:"",abs_Change:this.func_configLayout_langLayout_change}})),this.guideLayout_configLayout=e=>this.lang_system.map(t=>({dataFull:{config:{default:{title:t.view,class:"col-md-6 ",required:!1,placeholder:t.view,helper:t.view,code_form_component:t.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:e.lang_des[t.key]?e.lang_des[t.key]:"",abs_Change:this.func_configLayout_guideLayout_lang_change}})),this.func_configLayout_langLayout_en_change=e=>{let{modal_config_layout:t}=this.state;console.log("func_configLayout_langLayout_en_change"),t.form.lang_layout.list_lang_inputs[1].dataFull.value=e.target.value,this.setState({modal_config_layout:t})},this.func_configLayout_langLayout_change=(e,t)=>{let{modal_config_layout:a}=this.state;console.log("func_configLayout_langLayout_change",t),a.form.lang_layout.list_lang_inputs.find(e=>e.dataFull.config.default.code_form_component===t).dataFull.value=e.target.value,this.setState({modal_config_layout:a})},this.func_configLayout_guideLayout_lang_change=(e,t)=>{let{modal_config_layout:a}=this.state;console.log("func_configLayout_langLayout_change",t),a.form.guide_layout.list_guide_inputs.find(e=>e.dataFull.config.default.code_form_component===t).dataFull.value=e.target.value,this.setState({modal_config_layout:a})},this.func_configLayout_change=(e,t)=>{let{modal_config_layout:a}=this.state;a.form.config_layout[t].dataFull.value=e.target.value,this.setState({modal_config_layout:a})},this.func_modalConfig_layout_close=()=>{this.props.func_close_modal_config_layout()},this.loadDataToState=()=>{let e={};return e.list_buttons=[{dataFull:{config:{default:{title:l.g.getLang("btn_cancel"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_modalConfig_layout_close}},{dataFull:{config:{default:{title:l.g.getLang("btn_save"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.getData}}],e.config_layout={title:l.g.getLang("configLayout_title"),name_layout:{dataFull:{config:{default:{title:l.g.getLang("configLayout_name"),class:"col-md-6 ",required:!1,placeholder:l.g.getLang("configLayout_name"),helper:l.g.getLang("configLayout_name_helper"),code_form_component:"name_layout"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.name,abs_Change:this.func_configLayout_change}},guide_layout:{dataFull:{config:{default:{title:l.g.getLang("configLayout_des"),class:"col-md-6 ",required:!1,placeholder:l.g.getLang("configLayout_des"),helper:l.g.getLang("configLayout_des_helper"),code_form_component:"guide_layout"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.des,abs_Change:this.func_configLayout_change}},class_layout:{dataFull:{config:{default:{title:l.g.getLang("configLayout_class"),class:"col-md-6 ",required:!1,placeholder:l.g.getLang("configLayout_class"),helper:l.g.getLang("configLayout_class_helper"),code_form_component:"class_layout"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.class,abs_Change:this.func_configLayout_change}}},e.guide_layout={title:l.g.getLang("configLayout_langdes"),helper:l.g.getLang("configLayout_langdes_helper"),list_guide_inputs:this.guideLayout_configLayout(this.state.data)},e.lang_layout={title:l.g.getLang("configLayout_langname"),helper:l.g.getLang("configLayout_langname_helper"),list_lang_inputs:this.nameLayout_configLayout(this.state.data)},e},this.componentDidMount=()=>{let{modal_config_layout:e}=this.state;e.form=this.loadDataToState(),e.modal={title:l.g.getLang("configLayout_title ")+this.state.data.name,helper:" ",abs_Close:this.func_modalConfig_layout_close,visibility:!0},this.setState({modal_config_layout:e})},this.Modal_Config_Layout=Object(s.b)("designFormModal_ConfigLayout"),this.lang_system=l.g.getConfigUserDefault("list_lang_config"),this.state={modal_config_layout:{},data:this.readConfigLayout(this.props.data)}}render(){const e=this.Modal_Config_Layout;return console.log("this.state.data",this.state),o.a.createElement(e,{stateData:this.state.modal_config_layout})}}t.default=n},134:function(e,t,a){"use strict";a.r(t);var i=a(0),o=a.n(i),l=a(1),s=a(4);class n extends i.Component{constructor(e){super(e),this.getData=()=>{let e=this.state.modal_config_view.form,t={};e.lang_view.list_lang_inputs.forEach(e=>{const a=e.dataFull.config.default.code_form_component,i=e.dataFull.value;t[a]=i});const a=e.config_view.is_tab.dataFull.data.find(e=>e.selected);this.props.func_save_modal_config_view({name:e.config_view.name_view.dataFull.value,class:e.config_view.class_view.dataFull.value,code:e.config_view.guide_view.dataFull.value,isTab:a.value,lang:t,inputtype:this.state.data.inputtype,viewUI:this.state.data.viewUI,list_input:this.state.data.list_input,codeHidden:this.state.data.codeHidden})},this.nameView_configView=e=>this.lang_system.map(t=>({dataFull:{config:{default:{title:t.view,class:"col-md-6 ",required:!1,placeholder:t.view,helper:t.view,code_form_component:t.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:e.lang[t.key]?e.lang[t.key]:"",abs_Change:this.func_configView_langView_change}})),this.guideView_configView=e=>this.lang_system.map(t=>({dataFull:{config:{default:{title:t.view,class:"col-md-6 ",required:!1,placeholder:t.view,helper:t.view,code_form_component:t.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:e.lang_des[t.key]?e.lang_des[t.key]:"",abs_Change:this.func_configView_guideView_lang_change}})),this.func_configView_langView_change=(e,t)=>{let{modal_config_view:a}=this.state;a.form.lang_view.list_lang_inputs.find(e=>e.dataFull.config.default.code_form_component===t).dataFull.value=e.target.value,this.setState({modal_config_view:a})},this.func_configView_nameView_change=e=>{let{modal_config_view:t}=this.state;t.form.config_view.name_view.dataFull.value=e.target.value,this.setState({modal_config_view:t})},this.func_configView_guideView_change=e=>{let{modal_config_view:t}=this.state;t.form.config_view.guide_view.dataFull.value=e.target.value,this.setState({modal_config_view:t})},this.func_configView_classView_change=e=>{let{modal_config_view:t}=this.state;t.form.config_view.class_view.dataFull.value=e.target.value,this.setState({modal_config_view:t})},this.func_modalConfig_view_close=()=>{this.props.func_close_modal_config_view()},this.loadDataToState=()=>{let e={};return e.list_buttons=[{dataFull:{config:{default:{title:l.g.getLang("btn_cancel"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_modalConfig_view_close}},{dataFull:{config:{default:{title:l.g.getLang("btn_save"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.getData}}],e.config_view={title:l.g.getLang("configView_titleModal"),name_view:{dataFull:{config:{default:{title:l.g.getLang("configView_name"),class:"col-md-6 ",required:!1,placeholder:l.g.getLang("configView_name"),helper:l.g.getLang("configView_name_helper"),code_form_component:"name_view"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.name,abs_Change:this.func_configView_nameView_change}},guide_view:{dataFull:{config:{default:{title:l.g.getLang("configView_code"),class:"col-md-6 ",required:!1,placeholder:l.g.getLang("configView_code"),helper:l.g.getLang("configView_code_helper"),code_form_component:"guide_view"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.code,abs_Change:this.func_configView_guideView_change}},class_view:{dataFull:{config:{default:{title:l.g.getLang("configView_class"),class:"col-md-6 ",required:!1,placeholder:l.g.getLang("configView_class"),helper:l.g.getLang("configView_class_helper"),code_form_component:"class_view"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.class,abs_Change:this.func_configView_classView_change}},is_tab:{dataFull:{config:{default:{search:{placeholder:l.g.getLang("configView_isTab")},helper:l.g.getLang("configView_isTab_helper"),data_status:"No Result",title:l.g.getLang("configView_isTab"),class:"col-md-6",required:!1,code_form_component:"is_tab"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:"Yes",value:"true",selected:"true"===this.state.data.isTab},{title:"No",value:"false",selected:"true"!==this.state.data.isTab}],search_value:"",abs_Change:this.onChangeValueSelect,abs_search:this.search}}},e.lang_view={title:l.g.getLang("configView_langName"),helper:l.g.getLang("configView_langName_helper"),list_lang_inputs:this.nameView_configView(this.state.data)},e},this.onChangeValueSelect=(e,t,a)=>{let{modal_config_view:i}=this.state;if(console.log("componentCode",a),a){if("is_tab"===a)for(const t of i.form.config_view[a].dataFull.data)t.selected=t.value===e;else for(const t of i.form[a].dataFull.data)t.selected=t.value===e;this.setState({modal_config_view:i})}},this.componentDidMount=()=>{let{modal_config_view:e}=this.state;e.form=this.loadDataToState(),e.modal={title:l.g.getLang("configView_titleModal")+this.state.data.name,helper:" ",abs_Close:this.func_modalConfig_view_close,visibility:!0},this.setState({modal_config_view:e})},this.Modal_Config_View=Object(s.b)("designFormModal_ConfigView"),this.lang_system=l.g.getConfigUserDefault("list_lang_config"),this.state={modal_config_view:{},data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.name?t.name=e.name:t.name="",void 0!==e.lang?t.lang=e.lang:t.lang={},null!=e.code?t.code=e.code:t.code="",null!=e.class?t.class=e.class:t.class="",null!=e.codeHidden?t.codeHidden=e.codeHidden:t.codeHidden=l.g.autoID(),null!=e.inputtype?t.inputtype=e.inputtype:t.inputtype="",null!=e.isTab?t.isTab=e.isTab:t.isTab="false",null!=e.viewUI?t.viewUI=e.viewUI:t.viewUI="",null!=e.list_input?t.list_input=e.list_input:t.list_input=[],t}render(){const e=this.Modal_Config_View;return o.a.createElement(e,{stateData:this.state.modal_config_view})}}t.default=n},136:function(e,t,a){"use strict";a.r(t);var i=a(7),o=a(0),l=a.n(o),s=a(1),n=a(4),_=a(132),d=a(36),c=a(9),g=a(54),r=a(133),f=a(134);class u extends o.Component{constructor(e){super(e),this.func_save_rule_and_close=e=>{let{form_design_state:t,modal_edit_rule_func:a}=this.state,i=t.config_mode.data_config.configForm_role.configForm_role_config.table_data[this.state.modal_edit_rule_func.ruleStrong_index].data,o=this.form_detail.info.ruleStrong[a.ruleStrong_index],l=t.config_mode.data_config.configForm_role.configForm_role_config.table_data,s=a.ruleStrong_default;const n=s.isStart.dataFull.data.find(e=>e.selected),_=s.isStatus.dataFull.data.find(e=>e.selected),d=s.order.dataFull.data.find(e=>e.selected),c=s.inUse.dataFull.data.find(e=>e.selected),g=s.isDidStart.dataFull.data.find(e=>e.selected);if(o.config=e,o.code=s.code,o.isStart=n.value,o.isStatus=_.value,o.order=parseInt(d.value),o.inUse=c.value,o.isDidStart=g.value,this.form_detail){for(const e of l[a.ruleStrong_index].data[1].data)e.selected=e.title===s.code;i[2].data=o.order,i[3].data=o.isStatus?o.isStatus:"",i[4].data=o.isStart.toString(),i[5].data=o.inUse.toString(),i[6].data.dataFull.value=JSON.stringify(o.config,null,4)}a.visibility=!1,this.setState({form_design_state:t,modal_edit_rule_func:a})},this.set_rule_config_default=e=>{let t={};var a=[];let i=void 0!==e.isDidStart&&e.isDidStart;for(var o=1;o<=50;o++){var l={};l.title=o+"",l.value=o+"",a[o]=l}a[0]={title:s.g.getLang("designForm_rule_order_runFirst"),value:"-1",selected:!1},a.push({title:s.g.getLang("designForm_rule_order_runLast"),value:"9999",selected:!1}),a.forEach(t=>{t.selected=t.value===e.order.toString()});let n=[];for(let s=0;s<g.listRuleFormStatus.length;s++)n.push({title:g.listRuleFormStatus[s].name,value:g.listRuleFormStatus[s].name,val:g.listRuleFormStatus[s].val,selected:g.listRuleFormStatus[s].name===e.isStatus});return n.find(e=>e.selected)||(n[0].selected=!0),t.isStatus={dataFull:{config:{default:{search:{placeholder:s.g.getLang("designForm_rule_statusForm")},helper:s.g.getLang("designForm_rule_statusForm_helper"),data_status:"No Result",title:s.g.getLang("designForm_rule_statusForm"),class:"col-md-6",required:!1,code_form_component:"isStatus"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:n,search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.searchstatusform}},t.isStart={dataFull:{config:{default:{search:{placeholder:s.g.getLang("designForm_rule_begin")},helper:s.g.getLang("designForm_rule_begin_helper"),data_status:"No Result",title:s.g.getLang("designForm_rule_begin"),class:"col-md-6",required:!1,code_form_component:"isStart"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:s.g.getLang("designForm_yes"),value:!0,selected:e.isStart},{title:s.g.getLang("designForm_no"),value:!1,selected:!e.isStart}],search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.search}},t.inUse={dataFull:{config:{default:{search:{placeholder:s.g.getLang("designForm_rule_status")},helper:s.g.getLang("designForm_rule_status_helper"),data_status:"No Result",title:s.g.getLang("designForm_rule_status"),class:"col-md-6",required:!1,code_form_component:"inUse"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:s.g.getLang("designForm_yes"),value:!0,selected:e.inUse},{title:s.g.getLang("designForm_no"),value:!1,selected:!e.inUse}],search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.abs_search}},t.order={dataFull:{config:{default:{search:{placeholder:s.g.getLang("designForm_rule_order")},helper:s.g.getLang("designForm_rule_order_helper"),data_status:"No Result",title:s.g.getLang("designForm_rule_order"),class:"col-md-6",required:!1,code_form_component:"order"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:a,search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.search}},t.isDidStart={dataFull:{config:{default:{search:{placeholder:"Begin"},helper:"Begin",data_status:"No Result",title:"Begin",class:"col-md-6",required:!1,code_form_component:"isStart"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:s.g.getLang("designForm_yes"),value:!0,selected:i},{title:s.g.getLang("designForm_no"),value:!1,selected:!i}],search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.search}},t},this.onChangeValueSelect_ruleDefault=(e,t,a)=>{let{modal_edit_rule_func:i}=this.state;if(a){let e=[],o=[];e=i.ruleStrong_default[a].dataFull.data.filter(e=>e.selected),o=i.ruleStrong_default[a].dataFull.data.filter((e,a)=>a===t),e.length>0&&(e[0].selected=!1),o.length>0&&(o[0].selected=!0),this.setState({modal_edit_rule_func:i})}},this.renderBodyListConponentInfo=()=>{const e=this.form_detail.list_layout,t=[];return e.forEach(e=>{e.list_view.forEach(a=>{a.list_input.forEach(i=>{let o={data:[{data:e.name},{data:a.name},{data:i.default.name},{data:i.default.code}],config:{value:!1}};t.push(o)})})}),t},this.func_edit_rule_func=e=>{console.log("func_edit_rule_func======",e);let{modal_edit_rule_func:t}=this.state,a={};a=e.item_choose?this.state.form_design_state.config_mode.data_config.configForm_role.configForm_role_config.table_data[e.item_index].data[1].data.find(t=>t===e.item_choose):this.state.form_design_state.config_mode.data_config.configForm_role.configForm_role_config.table_data[e.item_index].data[1].data.find(t=>t.title===e.rule.code);let i=this.form_detail.info.ruleStrong[e.item_index];a&&(this.ModalEditRuleFunc=d.default[a.title],t.ruleStrong_detail=i.config,t.ruleStrong_index=e.item_index,t.ruleStrong_default=this.set_rule_config_default(i),t.ruleStrong_default.code=a.title,t.list_components=this.renderBodyListConponentInfo(),t.visibility=!0,this.setState({modal_edit_rule_func:t},()=>{}))},this.func_table_rule_name_change=(e,t,a,i,o)=>{let{form_design_state:l}=this.state;this.setState({form_design_state:l},()=>{this.func_edit_rule_func({item_index:t.item_index,item_choose:o})})},this.convert_configMode_template_default=e=>{let t=e.openOne,a=e.form_code,i=e.title,o=[];const l=this.props.data.allListApp.map(e=>e[this.LIST_APP]);for(let s=0;s<l.length;s++)o.push({title:l[s],value:l[s],selected:this.form_detail.info.app===l[s]});return o.find(e=>e.selected)||(o[0].selected=!0),{configForm_default_config:{how_to_open:{dataFull:{abs_Change:this.func_design_how_to_open_change,abs_search:this.search,config:{default:{search:{placeholder:s.g.getLang("designForm_opentype")},data_status:"No Result",title:s.g.getLang("designForm_opentype"),class:"col-md-6",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:s.g.getLang("designForm_openone"),value:"true",selected:"true"===t},{title:s.g.getLang("designForm_openmany"),value:"false",selected:"false"===t}],search_value:""}},form_id:{dataFull:{config:{default:{title:s.g.getLang("designForm_formID"),class:"col-md-6 ",required:!1,placeholder:s.g.getLang("designForm_formID")},cmd:{disable:!this.form_detail.template,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:a,abs_Change:this.func_form_id_change}},form_title:{dataFull:{config:{default:{title:s.g.getLang("designForm_formTitle"),class:"col-md-6 ",required:!1,placeholder:s.g.getLang("designForm_formTitle")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:i,abs_Change:this.func_form_title_change}},form_more_info:{dataFull:{config:{default:{title:s.g.getLang("designForm_moreInfo"),class:"col-md-6 ",required:!1,placeholder:s.g.getLang("designForm_moreInfo")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:e.des,abs_Change:this.func_form_moreinfo_change}},form_message_error:{dataFull:{config:{default:{search:{placeholder:s.g.getLang("designForm_messageError")},data_status:"No Result",title:s.g.getLang("designForm_messageError"),class:"col-md-6",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:s.g.getLang("designForm_yes"),value:"true",selected:"true"===e.list_show_error},{title:s.g.getLang("designForm_no"),value:"false",selected:"false"===e.list_show_error}],search_value:"",abs_Change:this.func_form_message_error_change,abs_search:this.search}},form_app:{dataFull:{config:{default:{search:{placeholder:s.g.getLang("designForm_app")},data_status:"No Result",title:s.g.getLang("designForm_app"),class:"col-md-6",required:!0,code_form_component:"form_app"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:o,search_value:"",abs_Change:this.onChangeValueSelect_ConfigFormDefault,abs_search:this.search}}}}},this.convert_configMode_template_data=e=>{let t=e.data,a=e.learnapi,i=e.learnsql,o=e.bodata;return{configForm_data_config:{data_manipulation:{dataFull:{config:{default:{title:s.g.getLang("designForm_data"),class:"col-md-12 ",required:!1,placeholder:s.g.getLang("designForm_data")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:t,abs_Change:this.func_form_data_change}},learn_API:{dataFull:{config:{default:{title:s.g.getLang("designForm_learnapi"),class:"col-md-12 ",required:!1,placeholder:s.g.getLang("designForm_learnapi")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:a,abs_Change:this.func_form_learnAPI_change}},learn_SQL:{dataFull:{config:{default:{title:s.g.getLang("designForm_learnsql"),class:"col-md-12 ",required:!1,placeholder:s.g.getLang("designForm_learnsql")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:i,abs_Change:this.func_form_learnSQL_change}},bo_data:{dataFull:{config:{default:{title:s.g.getLang("designForm_bodata"),class:"col-md-12 ",required:!1,placeholder:s.g.getLang("designForm_bodata")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:o,abs_Change:this.func_form_bo_data_change}}}}},this.convert_configMode_template_ruleFunc=e=>{let t=[];for(let a=0;a<e.ruleStrong.length;a++){const i={data:[{data:[{icon_item:"edit",title:s.g.getLang("designForm_btn_edit"),dataItem:{item_index:a,table_index:0,rule:e.ruleStrong[a]},abs_Click:this.func_edit_rule_func},{icon_item:"copy",title:s.g.getLang("designForm_btn_duplicate"),dataItem:{item_index:a,table_index:0,rule:e.ruleStrong[a]},abs_Click:this.func_duplicate_rule_func},{icon_item:"delete",title:s.g.getLang("designForm_btn_delete"),dataItem:{rule:e.ruleStrong[a],item_index:a},abs_Click:this.func_delete_rule_func}]},{data:[{title:"getInfo",value:"get_info",selected:"getInfo"===e.ruleStrong[a].code},{title:"numberCal",value:"number_cal",selected:"numberCal"===e.ruleStrong[a].code},{title:"visibility",value:"visibility",selected:"visibility"===e.ruleStrong[a].code},{title:"calculator",value:"calculator",selected:"calculator"===e.ruleStrong[a].code},{title:"setValue",value:"set_value",selected:"setValue"===e.ruleStrong[a].code},{title:"setDataGB",value:"setDataGB",selected:"setDataGB"===e.ruleStrong[a].code},{title:"managerComponent",value:"manager_component",selected:"managerComponent"===e.ruleStrong[a].code},{title:"runFo",value:"run_fo",selected:"runFo"===e.ruleStrong[a].code}],isUpdate:!1,dataItem:{item_index:a,table_index:1},abs_Change:this.func_table_rule_name_change},{data:e.ruleStrong[a].order},{data:void 0!==e.ruleStrong[a].isStatus?""+e.ruleStrong[a].isStatus:"Kh\xf4ng d\xf9ng"},{data:""+e.ruleStrong[a].isStart},{data:""+e.ruleStrong[a].inUse},{data:{dataFull:{config:{default:{title:"",class:"col-md-12",rows:10,code_form_component:""},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(e.ruleStrong[a].config,null,4)},abs_Change:this.func_change_textArea_rule}}],config:{value:!1}};t.push(i)}return t},this.convert_configMode_template_mode=e=>{let t=e.mode_form.col_input,a=e.mode_form.col_text;return{configForm_mode_config:{mode:{dataFull:{config:{default:{search:{placeholder:s.g.getLang("designForm_mode")},data_status:"No Result",title:s.g.getLang("designForm_mode"),class:"col-md-6",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:s.g.getLang("designForm_Horizontal"),value:"1",selected:"1"===e.mode_form.mode},{title:s.g.getLang("designForm_no"),value:"",selected:""===e.mode_form.mode}],search_value:"",abs_Change:this.func_configForm_mode_change,abs_search:this.search}},width_title:{dataFull:{config:{default:{title:s.g.getLang("designForm_widthTitle"),class:"col-md-6 ",required:!1,placeholder:s.g.getLang("designForm_widthTitle")},cmd:{disable:!1,visible:"1"===e.mode_form.mode,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:a,abs_Change:this.func_width_title_change}},width_component:{dataFull:{config:{default:{title:s.g.getLang("designForm_widthComponent"),class:"col-md-6 ",required:!1,placeholder:s.g.getLang("designForm_widthComponent")},cmd:{disable:!1,visible:"1"===e.mode_form.mode,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:t,abs_Change:this.func_width_component_change}}}}},this.func_change_lang_title=(e,t)=>{let{form_design_state:a}=this.state;a.config_mode.data_config.configForm_lang.configForm_lang_config.listLang.find(e=>e.dataFull.config.default.code_form_component===t).dataFull.value=e.target.value,this.setState({form_design_state:a})},this.func_design_how_to_open_change=e=>{let{form_design_state:t}=this.state;const a=t.config_mode.data_config.configForm_default.configForm_default_config.how_to_open.dataFull.data.find(t=>t.value===e),i=t.config_mode.data_config.configForm_default.configForm_default_config.how_to_open.dataFull.data.find(t=>t.value!==e);a.selected=!0,i.selected=!1,this.setState({form_design_state:t})},this.func_form_id_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_default.configForm_default_config.form_id.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_title_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_default.configForm_default_config.form_title.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.onChangeValueSelect_ConfigFormDefault=(e,t,a)=>{let{form_design_state:i}=this.state;if(a){for(const t of i.config_mode.data_config.configForm_default.configForm_default_config[a].dataFull.data)t.selected=t.value===e;this.setState({form_design_state:i})}},this.func_form_moreinfo_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_default.configForm_default_config.form_more_info.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_message_error_change=e=>{let{form_design_state:t}=this.state;const a=t.config_mode.data_config.configForm_default.configForm_default_config.form_message_error.dataFull.data.find(t=>t.value===e),i=t.config_mode.data_config.configForm_default.configForm_default_config.form_message_error.dataFull.data.find(t=>t.value!==e);a.selected=!0,i.selected=!1,this.setState({form_design_state:t})},this.func_form_data_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_data.configForm_data_config.data_manipulation.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_learnAPI_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_data.configForm_data_config.learn_API.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_learnSQL_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_data.configForm_data_config.learn_SQL.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_bo_data_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_data.configForm_data_config.bo_data.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_configForm_mode_change=e=>{let{form_design_state:t}=this.state;const a=t.config_mode.data_config.configForm_mode.configForm_mode_config.mode.dataFull.data.find(t=>t.value===e),i=t.config_mode.data_config.configForm_mode.configForm_mode_config.mode.dataFull.data.find(t=>t.value!==e);a.selected=!0,i.selected=!1,a.value?(t.config_mode.data_config.configForm_mode.configForm_mode_config.width_component.dataFull.config.cmd.visible=!0,t.config_mode.data_config.configForm_mode.configForm_mode_config.width_title.dataFull.config.cmd.visible=!0):(t.config_mode.data_config.configForm_mode.configForm_mode_config.width_component.dataFull.config.cmd.visible=!1,t.config_mode.data_config.configForm_mode.configForm_mode_config.width_title.dataFull.config.cmd.visible=!1),this.setState({form_design_state:t})},this.func_width_title_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_mode.configForm_mode_config.width_title.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_width_component_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_mode.configForm_mode_config.width_component.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_delete_rule_func=e=>{let{form_design_state:t}=this.state;this.form_detail.info.ruleStrong.splice(e.item_index,1),t.config_mode.data_config.configForm_role.configForm_role_config.table_data=this.convert_configMode_template_ruleFunc(this.form_detail.info),this.setState({form_design_state:t},()=>{})},this.func_duplicate_rule_func=e=>{let{form_design_state:t}=this.state;const a=s.g.cloneJson(e.rule);this.form_detail.info.ruleStrong.splice(0,0,a),t.config_mode.data_config.configForm_role.configForm_role_config.table_data=this.convert_configMode_template_ruleFunc(this.form_detail.info),this.setState({form_design_state:t})},this.func_configForm_role_add=()=>{let{form_design_state:e}=this.state;this.form_detail.info.ruleStrong.splice(0,0,{code:"getInfo",inUse:!0,isStart:!0,isStatus:"",order:"1",config:{component_action:"",component_event:"",api_id:"",component_result:""}}),e.config_mode.data_config.configForm_role.configForm_role_config.table_data=this.convert_configMode_template_ruleFunc(this.form_detail.info),this.setState({form_design_state:e})},this.func_design_back_to_home=()=>{console.log("func_design_back_to_home==>this.form_detail",this.form_detail),this.props.func_ListForm_Close(this.form_detail)},this.func_cancel_modal_config_component=()=>{let e=this.state.component_config_state;e.visibility=!1,this.setState({component_config_state:e})},this.func_cancel_modal_edit_rule_func=()=>{let{modal_edit_rule_func:e,form_design_state:t}=this.state;e.visibility=!1,this.setState({modal_edit_rule_func:e,form_design_state:t},()=>{})},this.func_ClickOpenTool=e=>{console.log("func_ClickOpenTool=====",e);let{form_design_state:t}=this.state,a=t.design_mode.data_config.design_tool.find(t=>t.title===e.title);void 0!==a&&(a.selected=!a.selected),this.setState({form_design_state:t})},this.convert_designToolItems_stateTemplate=e=>{let t=[];if(0===t.length)for(let a=0;a<this.allDesignToolGroups.length;a++){if(this.allDesignToolGroups[a].isActive){const i=s.g.cloneJson(this.allDesignToolGroups[a].group_id);t[a]={group_id:this.allDesignToolGroups[a].group_id,title:this.allDesignToolGroups[a].title[this.keylang],order:this.allDesignToolGroups[a].order,dataItem:{title:this.allDesignToolGroups[a].title[this.keylang],group_id:i},selected:!0,data:[]};let o=s.g.cloneJson(e.filter(e=>e.group_id===i&&e.isActive));for(let e=0;e<o.length;e++){let i=o[e];i.title=i.title[this.keylang],t[a].data.push(i)}t[a].data.sort((e,t)=>e.order-t.order)}t.sort((e,t)=>e.order-t.order)}return t=t.filter(e=>null!==e),t},this.func_design_inputFieldSearch_Change=e=>{console.log("func_inputFieldSearch_Change",e.target.value);let t=this.state.form_design_state;t.design_mode.data_config.search.value=e.target.value.toLowerCase().trim(),this.setState({form_design_state:t})},this.func_design_inputFieldSearch_Submit=()=>{console.log("func_design_inputFieldSearch_Submit");let e=this.state.form_design_state,t=e.design_mode.data_config.design_tool,a=e.design_mode.data_config.search.value;if(""!==a){for(let a=0;a<t.length;a++)t[a].data=[];let e=s.g.cloneJson(this.allDesignToolItems).filter(e=>e.title[this.keylang].toLowerCase().trim().includes(a));for(let a=0;a<t.length;a++){const i=t[a];let o=e.filter(e=>e.group_id===i.group_id);for(let e=0;e<o.length;e++){let i=o[e];i.title=i.title[this.keylang],t[a].data.push(i)}}}else t=this.convert_designToolItems_stateTemplate(this.allDesignToolItems);e.design_mode.data_config.design_tool=t,this.setState({form_design_state:e})},this.convert_renderHTML_allListForm=()=>{var e=a(12),t=[];if(void 0!==this&&null!==this){const a=document.getElementsByClassName("designForm-main-content");if(void 0!==a&&a.length>0&&null!==a[0]){let s=e.findDOMNode(a[0]).getElementsByClassName("Logic_DesignIsLayout");if(void 0!==s)for(var i=0;i<s.length;i++){const a={att_data:s[i].getAttribute("att-data"),att_id:s[i].getAttribute("att-id")};if(void 0!==a){t.push(a);let n=e.findDOMNode(s[i]).getElementsByClassName("Logic_DesignIsView ");if(void 0!==n)for(var o=0;o<n.length;o++){const a={att_data:n[o].getAttribute("att-data"),att_id:n[o].getAttribute("att-id")};if(void 0!==a){t.push(a);let i=e.findDOMNode(n[o]).getElementsByClassName("Logic_DesignIsComponent ");if(void 0!==i)for(var l=0;l<i.length;l++){const e={att_data:i[l].getAttribute("att-data"),att_id:i[l].getAttribute("att-id")};void 0!==e&&t.push(e)}}}}}}}let n=[],_=-1,d=-1,c=s.g.cloneJson(this.form_detail.list_layout);for(let a=0;a<t.length;a++){let e=t[a].att_data.split(".");if("new_view"===e[0]||"new_layout"===e[0]||"new_component"===e[0]){let e=this.allDesignToolItems.find(e=>e.att_id===t[a].att_id);if(void 0!==e){let i=s.g.cloneJson(e.template);switch(t[a].att_data){case"new_component":i.default.codeHidden=s.g.autoID(),n[_].list_view[d].list_input.push(i);break;case"new_view":i.codeHidden=s.g.autoID(),i.list_input=[],n[_].list_view.push(i),d++;break;case"new_layout":i.codeHidden=s.g.autoID(),i.list_view=[],n.push(i),_++,d=-1}}else console.log("Khong tim thay ",t[a].att_id)}else{let t=e[0],a=e[1],i=e[2];if(void 0!==i){let e=s.g.cloneJson(c[t].list_view[a].list_input[i]);n[_].list_view[d].list_input.push(e)}else if(void 0!==a){let e=s.g.cloneJson(c[t].list_view[a]);e.list_input=[],n[_].list_view.push(e),d++}else if(void 0!==t){let e=s.g.cloneJson(c[t]);e.list_view=[],n.push(e),_++,d=-1}else console.log("\u0110\u1eddi th\u1eadt b\u1ea5t ng\u1edd!")}}return n},this.func_DF_Design_save=async()=>{if(console.log("func_DF_Design_save"),this.form_detail){let e=s.g.cloneJson(this.form_detail),{form_design_state:t}=this.state,a=t.config_mode.data_config;if(e){let t=a.configForm_default.configForm_default_config.form_app.dataFull.data.find(e=>e.selected),i=a.configForm_default.configForm_default_config.how_to_open.dataFull.data.find(e=>e.selected),o=a.configForm_default.configForm_default_config.form_message_error.dataFull.data.find(e=>e.selected),l={};this.lang_system.forEach(e=>{const t=a.configForm_lang.configForm_lang_config.listLang.find(t=>t.dataFull.config.default.code_form_component===e.key);l[e.key]=t.dataFull.value});let n=a.configForm_mode.configForm_mode_config.mode.dataFull.data.find(e=>e.selected);if(e.info.app=t.value,e.info.form_code=a.configForm_default.configForm_default_config.form_id.dataFull.value,e.info.title=a.configForm_default.configForm_default_config.form_title.dataFull.value,e.info.des=a.configForm_default.configForm_default_config.form_more_info.dataFull.value,e.info.openOne=i.value,e.info.list_show_error=o.value,e.info.data=a.configForm_data.configForm_data_config.data_manipulation.dataFull.value,e.info.learnapi=a.configForm_data.configForm_data_config.learn_API.dataFull.value,e.info.learnsql=a.configForm_data.configForm_data_config.learn_SQL.dataFull.value,e.info.bodata=a.configForm_data.configForm_data_config.bo_data.dataFull.value,e.info.lang_form=l,e.info.mode_form.mode=n.value,e.info.mode_form.col_text=a.configForm_mode.configForm_mode_config.width_title.dataFull.value,e.info.mode_form.col_input=a.configForm_mode.configForm_mode_config.width_component.dataFull.value,e.info.last_update=this.formatDate(),e.template&&e.template.isTemplate){if(this.props.data.allListForms.find(t=>t.info.form_code===e.info.form_code&&t.info.app===e.info.app))return void this.props.showToast(s.g.getLang("designForm_SaveIDTaken"),!1)}const _=await this.props.bo_save_form(e);if(null!==_){if("NOT_ERROR"===s.g.foGetData("result",_).error_code){console.log("newFormSave",e),this.form_detail=e;const t=this.loadDataToState(e.info);t.config_mode.data_config.configForm_default.configForm_default_config.form_id.dataFull.config.cmd.disable=!0,t.design_mode.data_config.data_form.title=e.info.title,t.design_mode.data_config.data_form.title_sub=e.info.title,this.props.showToast(s.g.getLang("btn_save"),!0),this.setState({form_design_state:t})}}}}},this.func_component_dropped=()=>{console.log("func_component_dropped==>");let{form_design_state:e}=this.state,t=this.convert_renderHTML_allListForm();this.form_detail.list_layout=t;const a=s.g.copyJsonObject(this.convert_allListForm_listLayout());e.design_mode.data_config.data_form.isUpdate=!0,e.design_mode.data_config.design_tool=[],this.setState({form_design_state:e},()=>{e.design_mode.data_config.data_form.isUpdate=!1,e.design_mode.data_config.data_form.list_layout=a,e.design_mode.data_config.design_tool=this.convert_designToolItems_stateTemplate(this.allDesignToolItems),this.setState({form_design_state:e},()=>{})}),console.log("func_component_dropped===========>")},this.func_component_Copy=e=>{console.log("func_component_Copy==>",e);let t=this.state.form_design_state,a=t.design_mode.data_config.data_form.list_layout,i=e.att_data.split("."),o=i[0],l=i[1],n=i[2],_=s.g.cloneJson(this.form_detail);if(void 0!==o)if(void 0!==l)if(void 0!==n){let e=s.g.cloneJson(_.list_layout[o].list_view[l].list_input[n]);e.default.name+=" Copy",_.list_layout[o].list_view[l].list_input.splice(n,0,e)}else{let e=s.g.cloneJson(_.list_layout[o].list_view[l]);e.name+=" Copy",_.list_layout[o].list_view.splice(l,0,s.g.cloneJson(e))}else{let e=s.g.cloneJson(_.list_layout[o]);e.name+=" Copy",_.list_layout.splice(o,0,s.g.cloneJson(e))}this.form_detail=_,a=this.convert_allListForm_listLayout(),t.design_mode.data_config.data_form.list_layout=a,this.setState({form_design_state:t},()=>{})},this.convert_allListForm_listLayout=()=>{console.log("convert_allListForm_listLayout===>");let e=[],t=[],a=[],o=this.form_detail.list_layout;for(let l=0;l<o.length;l++){t=[];const n=o[l].list_view;for(let e=0;e<n.length;e++){a=[];const _=o[l].list_view[e].list_input;for(let t=0;t<_.length;t++){let n=_[t].inputtype,d={dataItem:{inputtype:n,att_data:`${l}.${e}.${t}`,config_item:_[t]},abs_Copy:this.func_component_Copy,abs_Delete:this.func_component_Delete,abs_Edit:this.func_component_Edit,abs_ChooseLayout:this.func_component_ChooseLayout,chooseLayout_config:{title:s.g.getLang("designForm_chooseLayout"),data:[]}};switch(n){case"jFullCalendar":a.push({inputtype:n,config:{default:Object(i.a)({class:"col-sm-6 offset-2 offset-3-right",title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"cButton":a.push({inputtype:n,config:{default:Object(i.a)({title:_[t].default.name,icon:_[t].config.icon,type:_[t].config.color},_[t].default)},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"jSameMain":a.push({inputtype:n,value:""!==_[t].config.callForm?"Load from":"No data form",code_form:_[t].config.callForm,config:{default:Object(i.a)({title:_[t].default.name},_[t].default)},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"jLabel":a.push({inputtype:n,config:{default:Object(i.a)({class:"col-sm-2",title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1},config:_[t]},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"cTableDefault":a.push({inputtype:n,config:{class:_[t].default.class,columns:JSON.parse(_[t].config.columns),cmd:{hasSearch:!0}},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"jChart":a.push({inputtype:n,config:{default:Object(i.a)({class:"col-sm-6 offset-2 offset-3-right",title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"jTableForm":a.push({title:_[t].default.name,inputtype:"jTableForm",config:{class:_[t].default.class,columns:JSON.parse(_[t].config.columns),cmd:{hasSearch:!1}},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"jCurrency":a.push({inputtype:n,value:"",config:{default:Object(i.a)({placeholder:"0.00",class:"col-md-8",title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"jCheckbox":a.push({title:_[t].default.name,inputtype:n,value:!0,class:_[t].default.class,config:{default:Object(i.a)({title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"jRadiobox":a.push({title:_[t].default.name,inputtype:n,value:!1,class:_[t].default.class,config:{default:Object(i.a)({title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1,error:{message:"",type:""}}},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"jMutiValue":a.push({inputtype:n,value:""!==_[t].config.callForm?"Load from":"No data form",code_form:o[l].list_view[e].list_input[t].config.callForm,config:{default:Object(i.a)({title:_[t].default.name,class:_[t].default.class},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1,error:{message:"",type:""}}},att_data:`${l}.${e}.${t}`,toolTip:d});break;case"cTextArea":a.push({inputtype:n,data:[],config:{default:Object(i.a)({class:_[t].default.class,title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1,error:{message:"",type:""}}},att_data:`${l}.${e}.${t}`,toolTip:d});break;default:a.push({title:_[t].default.name,inputtype:n,value:!1,class:_[t].default.class,config:{default:Object(i.a)({title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${l}.${e}.${t}`,toolTip:d})}}t.push({title:n[e].name,att_data:`${l}.${e}`,inputtype:"cView",toolTip:{dataItem:{inputtype:"cView",att_data:`${l}.${e}`},abs_Copy:this.func_component_Copy,abs_Delete:this.func_component_Delete,abs_Edit:this.func_component_Edit,abs_ChooseLayout:this.func_component_ChooseLayout,chooseLayout_config:{title:s.g.getLang("designForm_chooseLayout"),data:[]}},list_input:a})}e.push({title:o[l].name,att_data:l.toString(),inputtype:"cLayout",toolTip:{dataItem:{inputtype:"cLayout",att_data:""+l,title:o[l].name},abs_Copy:this.func_component_Copy,abs_Delete:this.func_component_Delete,abs_Edit:this.func_component_Edit,abs_ChooseLayout:this.abs_ChooseLayout,chooseLayout_config:{title:s.g.getLang("designForm_chooseLayout"),data:[]}},list_view:t})}return e},this.func_component_Edit=e=>{if(e.inputtype.includes("View")){console.log("func_View_Edit==>",e);let t=e.att_data.split("."),{modal_config_view:a}=this.state,i=this.form_detail.list_layout[e.att_data[0]].list_view[t[1]];a.att_data=t,a.visibility=!0,a.data=i,this.setState({modal_config_view:a})}else if(e.inputtype.includes("Layout")){console.log("func_Layout_Edit==>",e);let{modal_config_layout:t}=this.state,a=this.form_detail.list_layout[e.att_data];t.att_data=e.att_data,t.visibility=!0,t.data=a,this.setState({modal_config_layout:t},()=>{})}else{let t=this.state.component_config_state;const a=e.att_data.split(".");t.configItem=e.config_item,t.att_data_item=a,t.visibility=!0,t.configInputType=e.inputtype,this.setState({component_config_state:t})}},this.func_component_delete_confirm=()=>{let{form_design_state:e}=this.state,{modal_confirm_delete:t}=this.state;if("yes"===this.state.modal_confirm_delete.form.input_confirm.value.trim()){let a=e.design_mode.data_config.data_form.list_layout,i=this.modal_delete_component_dataItem.att_data.split("."),o=i[0],l=i[1],s=i[2];void 0!==o&&(void 0!==l?void 0!==s?this.form_detail.list_layout[o].list_view[l].list_input.splice(s,1):this.form_detail.list_layout[o].list_view.splice(l,1):this.form_detail.list_layout.splice(o,1)),a=this.convert_allListForm_listLayout(),e.design_mode.data_config.data_form.list_layout=a,t.modal.visibility=!1,t.form.input_confirm.value=""}else t.form.title=s.g.getLang("delete_failDeleteTitle");this.setState({modal_confirm_delete:t,form_design_state:e})},this.func_modal_confirm_input_change=e=>{let t=this.state.modal_confirm_delete;t.form.input_confirm.value=e.target.value,this.setState({modal_confirm_delete:t})},this.func_component_Delete=e=>{console.log("func_component_Delete==>",e);let t=this.state.modal_confirm_delete;t.modal.visibility=!0,this.modal_delete_component_dataItem=e,this.setState({modal_confirm_delete:t})},this.func_component_ChooseLayout=e=>{console.log("func_component_ChooseLayout==>",e)},this.func_confirm_delete_close=()=>{let e=this.state.modal_confirm_delete;e.modal.visibility=!1,this.setState({modal_confirm_delete:e})},this.func_close_modal_config_view=()=>{let{modal_config_view:e}=this.state;e.visibility=!1,this.setState({modal_config_view:e})},this.func_close_modal_config_layout=()=>{let{modal_config_layout:e}=this.state;e.visibility=!1,this.setState({modal_config_layout:e})},this.func_save_modal_config_layout=e=>{let{modal_config_layout:t,form_design_state:a}=this.state,i=t.att_data;e&&(this.form_detail.list_layout[i]=e,t.visibility=!1,a.design_mode.data_config.data_form.list_layout=this.convert_allListForm_listLayout(),this.setState({form_design_state:a,modal_config_layout:t}))},this.func_save_modal_config_view=e=>{let{modal_config_view:t,form_design_state:a}=this.state,i=t.att_data;e&&(this.form_detail.list_layout[i[0]].list_view[i[1]]=e,t.visibility=!1,a.design_mode.data_config.data_form.list_layout=this.convert_allListForm_listLayout(),this.setState({form_design_state:a,modal_config_view:t}))},this.func_save_cp_config=e=>{let{form_design_state:t,component_config_state:a}=this.state,i=a.att_data_item,o=this.form_detail.list_layout[i[0]].list_view[i[1]].list_input[i[2]];o&&e&&(o.default=e.default,o.config=e.config,o.property=e.property,o.lang=e.lang,o.role=e.role,o.validate=e.validate,t.design_mode.data_config.data_form.list_layout=this.convert_allListForm_listLayout(),a.visibility=!1),this.setState({form_design_state:t,component_config_state:a},()=>{})},this.loadDataToState=e=>{let t={abs_ClickOpenTool:this.func_ClickOpenTool,abs_component_dropped:this.func_component_dropped,design_mode:{title:s.g.getLang("designForm_Design"),img:"edit",data_config:{design_tool:[],search:{placeholder:s.g.getLang("designForm_Search"),value:"",abs_Change:this.func_design_inputFieldSearch_Change,abs_Submit:this.func_design_inputFieldSearch_Submit},data_form:{list_layout:[]}}},config_mode:{title:s.g.getLang("designForm_ConfigureInformation"),img:"settings",data_config:{tab:{data:[{id:"configForm_default",title:s.g.getLang("designForm_Config_Default")},{id:"configForm_data",title:s.g.getLang("designForm_Config_Data")},{id:"configForm_lang",title:s.g.getLang("designForm_Config_Lang")},{id:"configForm_mode",title:s.g.getLang("designForm_Config_Mode")},{id:"configForm_role",title:s.g.getLang("designForm_Config_Rule")}],abs_select:this.test},configForm_default:{},configForm_data:{},configForm_lang:{configForm_lang_config:{listLang:[]}},configForm_mode:{},configForm_role:{configForm_role_config:{title:s.g.getLang("designForm_titleRule"),button_add_function:{dataFull:{config:{default:{title:s.g.getLang("designForm_addRule"),type:"primary",class:"",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.func_configForm_role_add}},table_config:[{type:"uTableColumnButtonHover",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnSelectItem",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnTextArea",config:{mode:"left",isFrozen:!1}}],table:{dataFull:{Header:{data:[{title:"",config:{width:"",isFrozen:!1}},{title:s.g.getLang("designForm_rulename"),config:{isFrozen:!1}},{title:s.g.getLang("designForm_order"),config:{isFrozen:!1}},{title:s.g.getLang("designForm_statusForm"),config:{isFrozen:!1}},{title:s.g.getLang("designForm_start"),config:{isFrozen:!1}},{title:s.g.getLang("designForm_inUse"),config:{isFrozen:!1}},{title:s.g.getLang("designForm_parameterConfig"),config:{isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[]}},configForm_react:{configForm_react_config:{button_add_txt:{dataFull:{config:{default:{title:"React Txt",type:"primary",class:"col-md-1",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.testButton}},text_area:{dataFull:{config:{default:{title:"",class:"col-md-12",rows:10,code_form_component:""},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:"test",abs_Change:this.testTextArea}}}},configForm_tool:{configForm_tool_config:{button_format:{dataFull:{config:{default:{title:"Format class default",type:"primary",class:"",icon:"cached_filled"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.testButton}},button_copy:{dataFull:{config:{default:{title:"Copy form config",type:"",class:"",icon:"file_copy"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.testButton}},command_line:{dataFull:{config:{default:{title:"Command line",class:"col-md-12 ",required:!0,placeholder:"Enter key word"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.testInput}}}}}},back_to_home:{title:s.g.getLang("designForm_BacktoHome"),abs_Click:this.func_design_back_to_home},cmd:{visibility:!0},preview_button:{dataFull:{config:{default:{title:s.g.getLang("designForm_Preview"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.test3}},save_button:{dataFull:{config:{default:{title:s.g.getLang("designForm_save"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_DF_Design_save}}};t.config_mode.data_config.configForm_default=this.convert_configMode_template_default(e),t.config_mode.data_config.configForm_data=this.convert_configMode_template_data(e);let a={};return this.lang_system.map(e=>(void 0===this.form_detail.info.lang_form?a="":a[e.key]=this.form_detail.info.lang_form[e.key],t.config_mode.data_config.configForm_lang.configForm_lang_config.listLang.push({dataFull:{config:{default:{title:e.view,class:"col-md-6 ",required:!1,placeholder:e.view,helper_description:e.view,code_form_component:e.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:a[e.key],abs_Change:this.func_change_lang_title}}))),t.config_mode.data_config.configForm_mode=this.convert_configMode_template_mode(e),t.config_mode.data_config.configForm_role.configForm_role_config.table_data=this.convert_configMode_template_ruleFunc(e),t.design_mode.data_config.data_form.title=e.title,t.design_mode.data_config.data_form.title_sub=e.title,t.design_mode.data_config.data_form.list_layout=this.convert_allListForm_listLayout(),t.design_mode.data_config.design_tool=this.convert_designToolItems_stateTemplate(this.allDesignToolItems),t},this.componentDidMount=()=>{console.log("componentDidMount"),this.allDesignToolGroups=this.props.data.allDesignToolGroups,this.allDesignToolItems=this.props.data.allDesignToolItems,this.form_detail=this.readConfig(this.props.data.form_detail),console.log("this.form_detail=======",this.form_detail);let e=this.form_detail.info;const t=this.loadDataToState(e);this.setState({form_design_state:t})},this.DESIGNFORM_CODE_TOOL_GROUPS="designToolGroup",this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.LIST_APP="app",this.allDesignToolItems=[],this.allDesignToolGroups=[],this.form_detail={},this.keylang=s.g.getLangKey(),this.DF_Design_Render=Object(n.b)("screen_design"),this.Modal_Confirm_Delete=Object(n.b)("designFormModal_confirm"),this.lang_system=s.g.getConfigUserDefault("list_lang_config"),this.ModalEditRuleFunc=null,this.state={component_config_state:{visibility:!1,configInputType:"",configItem:{},att_data_item:[]},modal_config_layout:{visibility:!1,att_data:null,data:{}},modal_config_view:{visibility:!1,att_data:null,data:{}},form_design_state:{},modal_confirm_delete:{form:{title:s.g.getLang("designForm_delete_titleForm"),title_sub:s.g.getLang("designForm_delete_titleForm_sub"),list_buttons:[{dataFull:{config:{default:{title:s.g.getLang("designForm_btn_cancel"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_confirm_delete_close}},{dataFull:{config:{default:{title:s.g.getLang("designForm_btn_delete"),type:"danger",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_component_delete_confirm}}],input_confirm:{value:"",placeholder:s.g.getLang("designForm_delete_inputConfirm"),abs_Change:this.func_modal_confirm_input_change}},modal:{title:s.g.getLang("designForm_delete_titleModal"),abs_Close:this.func_confirm_delete_close,visibility:!1}},modal_edit_rule_func:{visibility:!1,ruleStrong_detail:{},ruleStrong_index:{},ruleStrong_default:{},list_components:[]}}}readConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},a={info:{last_update:"",list_show_error:"false",app:"o9",title:"",bodata:"",data:"",des:"",flow_layout:[],form_code:"",key_form:"",lang_form:"",learnapi:"",learnsql:"",mode_form:{mode:"",col_text:"",col_input:""},node_position:[],ofModal:!1,openOne:"false",ruleStrong:[],responseType:"1"},list_layout:[],react_txt:"",template:!1};for(let i in a)if("info"===i){t.info={};for(let i in a.info)t.info[i]=e.info[i]||a.info[i]}else t[i]=e[i]||a[i];return t.list_layout=e.list_layout,t}formatDate(e){return e||(e=(new Date).getTime()),Object(c.b)(e,"DD/MM/YYYY hh:mm:ss A")}render(){const e=this.DF_Design_Render,t=this.Modal_Confirm_Delete,a=this.ModalEditRuleFunc;return l.a.createElement(l.a.Fragment,null,l.a.createElement(e,{stateData:this.state.form_design_state}),l.a.createElement(t,{stateData:this.state.modal_confirm_delete}),this.state.modal_config_layout.visibility?l.a.createElement(r.default,{data:this.state.modal_config_layout.data,func_close_modal_config_layout:this.func_close_modal_config_layout,func_save_modal_config_layout:this.func_save_modal_config_layout}):null,this.state.modal_config_view.visibility?l.a.createElement(f.default,{data:this.state.modal_config_view.data,func_save_modal_config_view:this.func_save_modal_config_view,func_close_modal_config_view:this.func_close_modal_config_view}):null,this.state.component_config_state.visibility?l.a.createElement(_.default,Object.assign({},this.props,{configComponent:this.state.component_config_state,func_cancel_modal_config_component:this.func_cancel_modal_config_component,func_save_cp_config:this.func_save_cp_config})):null,this.state.modal_edit_rule_func.visibility?l.a.createElement(a,{modal_edit_rule_func:this.state.modal_edit_rule_func,func_cancel_modal_edit_rule_func:this.func_cancel_modal_edit_rule_func,func_save_rule_and_close:this.func_save_rule_and_close}):l.a.createElement(l.a.Fragment,null))}}t.default=u}}]);